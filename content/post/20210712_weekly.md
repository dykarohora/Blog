---
title: "2021å¹´7æœˆç¬¬2é€±ãƒ¬ãƒãƒ¼ãƒˆ"
slug: "20210712_weekly"
author: "d_yama"
date: 2021-07-12T09:00:00+09:00
draft: false
categories: ["Weekly Report"]
tags: []
---

# ã‚¤ãƒ³ãƒ—ãƒƒãƒˆ
## ğŸ“ Azure Functions For TypeScript
æœ€è¿‘ã¯Azure Functionsã‚’ä½¿ã£ã¦ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã®å®Ÿè£…ã‚’è©¦ã¿ã¦ã„ã¾ã™ã€‚è¨€èªã¯è‡ªåˆ†ãŒä¸€ç•ªã¨å¾—æ„ã¨ã™ã‚‹TypeScriptã‚’ä½¿ã£ã¦ã„ã¾ã™ã€‚MSå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯JavaScriptã«ã‚ˆã‚‹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯æƒã£ã¦ã„ã¾ã™ãŒã€TypeScriptã«ã¤ã„ã¦ã¯ã‚µãƒãƒ¼ãƒˆã¯ã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ã®ãã‚Œã»ã©è¨€åŠã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ã¨ã¯ã„ãˆJavaScriptç’°å¢ƒã¨æ¯”ã¹ã¦å¤‰åŒ–ãŒã‚ã‚‹ã®ã¯`function.json`ã§ã®ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆã®æŒ‡å®šãã‚‰ã„ãªã®ã§ã€ãã‚Œã»ã©è‹¦åŠ´ã™ã‚‹ã“ã¨ã‚‚ãªã„ã‹ã¨æ€ã„ã¾ã™ã€‚

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆ
ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã«ã¯[Azure Function Core Tools](https://docs.microsoft.com/en-us/azure/azure-functions/functions-run-local?tabs=macos%2Ccsharp%2Cbash)ã‚’ä½¿ã†ã®ãŒã„ã„ã¨æ€ã„ã¾ã™ã€‚

ã¾ãšã¯ã€Azure Function Core Toolsã‚’ä½¿ã£ã¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œã‚Šã¾ã™ã€‚

```bash
func init
```

ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã¯nodeã‚’æŒ‡å®šã—ã¾ã™ã€‚

```bash
Select a number for worker runtime:
1. dotnet
2. dotnet (isolated process)
3. node
4. python
5. powershell
6. custom
Choose option: 3
```

ä½¿ç”¨è¨€èªã¨ã—ã¦TypeScriptã‚’æŒ‡å®šã§ãã‚‹ã®ã§ãã¡ã‚‰ã‚’æŒ‡å®šã—ã¾ã™ã€‚

```bash
Select a number for language:
1. javascript
2. typescript
Choose option: 2
```

tsconfig.jsonã‚„package.jsonã¨ã„ã£ãŸTypeScriptãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«å¿…è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚

```bash
Writing .funcignore
Writing package.json
Writing tsconfig.json
Writing .gitignore
Writing host.json
Writing local.settings.json
Writing /Users/d_yama/functions-project/second-app/.vscode/extensions.json
```

å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ãŸã‚`yarn`ã‹`npm install`ã‚’å®Ÿè¡Œã—ã¦ãŠãã¾ã™ã€‚

### é–¢æ•°ã‚’ä½œã‚‹

Azure Function Core Toolsã‚’ä½¿ã£ã¦é–¢æ•°ã‚’ä½œã‚‹ã¨ã€`function.js`ã‚„`index.ts`ã«ã‚¹ã‚±ãƒ«ãƒˆãƒ³ã‚³ãƒ¼ãƒ‰ãŒåŸ‹ã‚è¾¼ã¾ã‚Œã¦ç”Ÿæˆã•ã‚Œã¾ã™ã€‚

```bash
func new
```

Durable Functionsã‚’å«ã‚ã€ä»»æ„ã®ãƒˆãƒªã‚¬ãƒ¼ã‚’é¸æŠã§ãã¾ã™ã€‚

```bash
Select a number for template:
1. Azure Blob Storage trigger
2. Azure Cosmos DB trigger
3. Durable Functions activity
4. Durable Functions entity
5. Durable Functions Entity HTTP starter
6. Durable Functions HTTP starter
7. Durable Functions orchestrator
8. Azure Event Grid trigger
9. Azure Event Hub trigger
10. HTTP trigger
11. IoT Hub (Event Hub)
12. Kafka output
13. Kafka trigger
14. Azure Queue Storage trigger
15. RabbitMQ trigger
16. SendGrid
17. Azure Service Bus Queue trigger
18. Azure Service Bus Topic trigger
19. SignalR negotiate HTTP trigger
20. Timer trigger
Choose option: 
```

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ
Azure Function Core Toolsã§TypeScriptã‚’æŒ‡å®šã—ã¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ãŸã¨ãã€TSã‚³ãƒ¼ãƒ‰ã‚’ãƒˆãƒ©ãƒ³ã‚¹ãƒ‘ã‚¤ãƒ«ã—ãŸJSã‚³ãƒ¼ãƒ‰ã¯`dist`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«å‡ºåŠ›ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚

ãªãŠã€`func new`ã§é–¢æ•°ã‚’ä½œæˆã—ãŸã¨ãã®`function.json`ã¯æ¬¡ã®ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹ã€‚

```json
{
  "bindings": [
    {
      "authLevel": "function",
      "type": "httpTrigger",
      "direction": "in",
      "name": "req",
      "methods": [
        "get",
        "post"
      ]
    },
    {
      "type": "http",
      "direction": "out",
      "name": "res"
    }
  ],
  "scriptFile": "../dist/getStocks/index.js"
}
```

`scriptFile`ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«æŒ‡å®šã•ã‚ŒãŸãƒ‘ã‚¹ã®é–¢æ•°ãŒå®Ÿè¡Œã•ã‚Œã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ï¼ˆTSã‚³ãƒ¼ãƒ‰ãŒç›´æ¥å®Ÿè¡Œã•ã‚Œã‚‹ã‚ã‘ã§ã¯ãªã„ï¼‰

### é–¢æ•°ã‚³ãƒ¼ãƒ‰

æŒ‡å®šã—ãŸã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆãƒ•ã‚¡ã‚¤ãƒ«å†…ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹é–¢æ•°ãŒFunctionsã§ã¯å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚

```typescript
export default function (context: Context) {
 
}
```

`Context`ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãªã©Functionsã‹ã‚‰æ¸¡ã£ã¦ãã‚‹ã‚‚ã®ã¯å‹å®šç¾©ãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚ã—ã‹ã—å„ç¨®ãƒˆãƒªã‚¬ãƒ¼ã‚„ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã§æ¸¡ã£ã¦ãã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯`any`ã¨ãªã‚‹ã®ã§ã€ãã®è¾ºã‚Šã¯è‡ªåˆ†ã§å‹ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã§æ³¨é‡ˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

# ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆ

ç›®ç«‹ã£ãŸã‚‚ã®ã¯ãªã—ã€‚












