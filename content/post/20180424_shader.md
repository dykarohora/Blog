---
title: "シェーダー芸人になりたいと思った話"
date: 2019-04-24T09:56:17+09:00
draft: true
---

# どうしてシェーダ芸人になりたいと思ったか
* AR/VRアプリを開発するにあたって、体験の質をより良くするために「見た目」をどのようにデザインするかは避けられない（もちろん体験の質を上げる方法はそれだけじゃない）
* リアルタイムレンダリングにおける「見た目」をデザインするにあたって3Dグラフィックスのスキルは欠かせないと思った
* 「オレ、シェーダ書けますよ」って言えたら、なんとなくカッコ良さそうだから（最重要）

# シェーダ芸人になろうと決意したときの3Dグラフィックスのスキルセット
2019年4月ぐらいに決意し、そのころから勉強/調査を始めた
* Unityは使えるけど得意なのはC#を使ってビジネスロジックを組むこと。グラフィックスは参考書レベル。
* 数学の知識としては、ベクトル/行列の基本的な演算はできるといった、いわゆる高校数学はわかるレベル。
* 3Dグラフィックスプログラミングの知識としては、MVP(モデルビュープロジェクション)変換は知ってる、グラフィックパイプラインは存在だけで中身はよくわかっていないレベル。
「俺たちはふいんきでUnityを使っている」を文字通りあらわした用のスキルです

# やったこと
## DirectXを触ってみる(2019年4月上旬ごろ)
Windowsで3DグラフィックスといえばDirectX、王道に近道なし、ということで基礎の基礎から学ぶのが良いのではないか思い、参考書を片手に勉強を開始しました。
参考書としてはNorthBrainさんの書籍や、洋書のを利用しました。

全て読破したわけではありませんが、頂点シェーダやフラグメントシェーダの仕組みや有名な反射モデル、メッシュのレンダリングといった内容は理解できました。特にバイナリファイルからスキンメッシュを組み立てみたのですが、3Dモデルにどのようなデータが含まれているのか知ることができたのは個人的に大きかったです。

ただ、得るものは多いが最初は何やってるのかチンプンカンプンな時期が長いので他の人にはオススメしないかも。

## WebGLでレイマーチングをやってみる(2019年4月中旬ごろ)
このころちょっと飽きてきたというか、目指す方向が漠然としすぎていて次に何をしようかイメージできず手が動きませんでした。
ぼんやりウェブを巡回しているとSharderToyにたどり着き、シェーダで作られた作品群を見て、自分もこんなん作れたらカッケーなと思い、どうやれば作れるんだろと調べてたら「レイマーチング」という言葉にたどり着きました。

GLSLで書かれたサンプルが多かったし、かの有名なサイトもWebGL + GLSLで解説されてたのでWebGLにチャレンジしてみました。
幸いJavaScript/TypeScriptはそこそこ書けるので、すぐにとっかかれました。
DirectXをちょっとかじってたおかけで、ポリゴンをレンダリングするまではサクサク、基本的な反射モデルを使ったシェーディングもだいたいわかるので早速レイマーチングにチャレンジ。

レイマーチングの概念はこのスライドがとても分かりやすかったです。
ただ、実際レイマーチングを使ったフラグメントシェーダを組んでみようとすると、距離関数の数式からどのような図形ができるのかイメージしづらく最初のころは大変でした。

さいんこさいんたんじぇんとを知ってる程度でしたがこのあたりに逆三角関数とかもおさらいしました。


## 世の中に出回ってるUnityシェーダを写経する(2019年4月下旬ごろ)
レイマーチングのシェーダを書いてる当たり、「これってHoloLensでやろうとしたら結構大変じゃね？」と思い出してまたもやちょっと熱が冷めてきました。

どうすっかなーと思ったときにこんな記事を発見

おお、これもカッコイイ。ジオメトリシェーダ使ってるけど、レイマーチングよりは負荷軽いんじゃないと思いUnityでのシェーダ実装を始めました。

最初はおもちゃラボさんの入門記事でサーフェイスシェーダをちょいちょい書く。
でも頂点シェーダ/フラグメントシェーダで書いた方が色々できそうと思い、ShaderLabにあるコードを写経することにしました。
写経するにあたって気を付けたのは、一行ごとに式の内容を言語化してコメントに残すようにしました。
業務ではこんなことやりませんが、勉強のときはこれが一番小さいインプットとアウトプットのサイクルだと思っているので、勉強の初期段階でよくやっている方法です。

同時にUnityシェーダ、いわゆるShaderLabの仕様についても学習しました。
染井吉野ゲームスさんのUnityシェーダの教科書で。vol.1～vol.3まで全部読みました。いい。